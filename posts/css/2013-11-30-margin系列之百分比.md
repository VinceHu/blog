## margin系列之百分比

### 你可能从没注意过它

在 [margin系列之keyword auto](http://blog.doyoe.com/~posts/css/2013-11-29-margin%E7%B3%BB%E5%88%97%E4%B9%8Bkeyword%20auto.md) 中，说过了 `margin` 值为 `auto` 的情况，这次要聊的是值为百分比的情形。

我必须承认这是一个非常基础的知识点，但有一段时间我发现很多人对此有错误的认知。偶尔在面试或者分享的时候，我会问到这个问题，有人会脱口而出的告诉我他对此的感性理解。

或许现在大多数人对此不屑一顾，但我仍想说一说，这样以后就可以不再问类似的问题了。

### 假设有这样一个场景

仍然以一个问题来开始，这是我之前在 [微博](http://weibo.com/doyoe) 发过的，原文是这样的：

<!--more-->

假设一个块级包含容器，宽1000px，高600px，块级子元素定义 `margin:10% 5%;` 大家说说 `margin` 的 `top, right, bottom, left` 计算值最终是多少？

我记得得到不少 `100px 30px 100px 30px` 的反馈，我们来还原代码：

#### CSS:

```css
#demo{
	width: 1000px;
	height: 600px;
}
#demo p{
	margin: 10% 5%;
}
```

#### HTML:
```html
<div id="demo">
	<p>恩，注意看我所在的位置。</p>
</div>
```

事实告诉我们结果是 `100px 50px 100px 50px`，不论结果是否符合你的预期，我们先来看demo验证一下：[margin百分比结果猜想](//demo.doyoe.com/css/margin/percentage.htm)，当然，你也根据上面还原的代码创建一个例子。

### 为什么会这样？

诧异吗？不用怀疑浏览器出了问题，因为这是正确的实现。

规范中注明 `margin` 的百分比值参照其包含块的宽度进行计算。

当然，它不会这么简单，和上篇文章 keyword auto 一样，这只发生在默认的 `writing-mode: horizontal-tb;` 和 `direction: ltr;` 的情况下。

当书写模式变成纵向的时候，其参照将会变成包含块的高度。我们改变一下上面例子中的CSS书写模式：

#### CSS:

```css
#demo{
	-webkit-writing-mode: vertical-rl; /* for browsers of webkit engine */
	writing-mode: tb-rl; /* for ie */
}
```

在 #demo 中添加这2句，其它code不变。也有个例子供观：[书写模式影响margin百分比的参照对象](//demo.doyoe.com/css/margin/percentage2.htm)。

对了，这回的结果是 `60px 30px 60px 30px` ，因为其参照对象变成了包含块的高度。


待续。。。

### margin系列文章：

* [margin系列之keyword auto](http://blog.doyoe.com/~posts/css/2013-11-29-margin%E7%B3%BB%E5%88%97%E4%B9%8Bkeyword%20auto.md)
* [margin系列之百分比](http://blog.doyoe.com/~posts/css/2013-11-30-margin%E7%B3%BB%E5%88%97%E4%B9%8B%E7%99%BE%E5%88%86%E6%AF%94.md)